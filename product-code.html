<html>
  <head>
    <script src="https://git.ahem.net.au/script/qrcode.js"></script>
    <script src="https://git.ahem.net.au/script/JsBarcode.js"></script>
    <script src="https://sdks.shopifycdn.com/js-buy-sdk/v2/latest/index.umd.min.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      const ahemcode = params.get('product_code');
      const barcode = barcode + '';

      var qrcode = new QRCode(document.getElementById("qrcode"), { width : 100, height : 100 });

      var client = ShopifyBuy.buildClient(
        {
          domain: 'ahem-engineering.myshopify.com',
          storefrontAccessToken: 'c43dd5285b9eaf2ce09081222ee4c393',
        }
      );

      const product_request = btoa('gid://shopify/Product/'+"7698399953117");

      client.product.fetch(product_request).then((product) => {
        document.getElementById('product-name').innerHTML = product.title;

        var product_url = "http://shop.ahem.net.au/products/" + product.handle;

        const product_anchor = document.getElementById('productURL');

        product_anchor.innerHTML = product_url;
        product_anchor.href = product_url;

        qrcode.makeCode(product_url);

        JSBarcode("#barcode", ahemcode, { width: 3, height: 100, text: ahemcode });
      });
    </script>
  </head>
  
  <body>
    <table>
      <tbody>
        <th>
          <td id="product-name" colspan="2"></td>
        </th>
        <tr>
          <td id="barcode" style="width: 100px"></td>
          <td id="qrcode" style="width: 120px"></td>
        </tr>
        <tr>
          <td colspan="2"><a id='productURL' href=''></a></td>
        </tr>
      </tbody>
    </table>
  </body>
